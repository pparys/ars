set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-table-foreign-2.0 {
  execsql {
    CREATE TABLE company(id INTEGER PRIMARY KEY, name TEXT);
    CREATE TABLE person(id INTEGER PRIMARY KEY, name TEXT, company_id INTEGER, FOREIGN KEY company_id REFERENCES company);
    INSERT INTO company VALUES(1, 'ABC');
    INSERT INTO person VALUES(1, 'John', 1);
  }
} {}

do_test update-parent-2.1 {
  execsql {
    UPDATE person SET company_id = 2 WHERE id = 1;
  }
} {1 {FOREIGN KEY constraint failed: person.companies_id to companies.id}  	
	
finish_test