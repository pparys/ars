set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-table-foreign-key-1.0 {
  execsql {
    CREATE TABLE orders(id INTEGER PRIMARY KEY, product_id INTEGER);
    CREATE TABLE products(id INTEGER PRIMARY KEY, name TEXT);
    INSERT INTO orders(id, product_id) VALUES(1, 1);
    INSERT INTO orders(id, product_id) VALUES(2, 1);
    INSERT INTO products(id, name) VALUES(1, 'Laptop');
  }
} {}

do_test update-violates-foreign-key-1.1 {
  execsql {
    UPDATE orders SET product_id = 2 WHERE id = 1;
  }

  













  





  





  





  





  





  





 







 





 





 





 





 





 








  





  





 





 





  





 








  





  





 





 





 





 







  





 





 





  





 





  





 








  





    





  }





 
 
 
 
 
 
 
 
 


 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 

  
  





 







 
        {1 {FOREIGN KEY constraint failed: orders.product_id}     
    
  finish_test