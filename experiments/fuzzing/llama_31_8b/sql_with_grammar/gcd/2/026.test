set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-index-1.0 {
  execsql {
    CREATE TABLE customers(cust_id INTEGER PRIMARY KEY, customer_name TEXT, phone_number TEXT);
    CREATE TABLE orders(order_id INTEGER PRIMARY KEY, cust_id INTEGER, FOREIGN KEY cust_id REFERENCES customers);
  CREATE TABLE order_items(order_item_id INTEGER PRIMARY KEY, order_id INTEGER, item_name TEXT, price REAL);

    INSERT INTO customers(cust_id, customer_name, phone_number)
    VALUES
    (1001, 'John Smith', '123-456-7890');
    INSERT INTO customers(cust_id, customer_name, phone_number)
    VALUES
    (1002, 'Jane Doe', '987-654-3210');

    INSERT INTO orders(order_id, cust_id)
    VALUES
    (101, 1001);
    INSERT INTO orders(order_id, cust_id)
    VALUES
    (102, 1002);

    INSERT INTO order_items(order_item_id, order_id, item_name, price)
    VALUES
    (1, 101, 'iPhone', 999.99);
    INSERT INTO order_items(order_item_id, order_id, item_name, price)
    VALUES
    (2, 102, 'MacBook', 1999.99);
  }
} {}

do_test select-customer-1.1 {
  execsql {
    SELECT customer_name
    FROM customers
    WHERE cust_id = 1001;
  }
} {John Smith}

finish_test