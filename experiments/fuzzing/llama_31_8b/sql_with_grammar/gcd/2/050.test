set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-foreign-keys-1.0 {
  execsql {
    CREATE TABLE departments(id INTEGER PRIMARY KEY, name TEXT);
    CREATE TABLE employees(id INTEGER PRIMARY KEY, department_id INTEGER, name TEXT, FOREIGN KEY department_id REFERENCES departments);
    INSERT INTO departments(id, name) VALUES(101, 'Sales');
    INSERT INTO departments(id, name) VALUES(102, 'Marketing');
    INSERT INTO employees(id, department_id, name) VALUES(201, 101, 'Alice');
    INSERT INTO employees(id, department_id, name) VALUES(202, 101, 'Bob');
  }
} {}

do_test select-employee-1.1 {
  execsql {
    SELECT e1department_id, e1name FROM employees AS e1
    WHERE e1department_id = 101
  ORDER BY e1name;
  }
} {101 Alice 101 Bob}

finish_test