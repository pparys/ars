set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-schema-1.0 {
  execsql {
    CREATE TABLE orders (
      id INTEGER,
      customer_id INTEGER,
      order_date TEXT,
      PRIMARY KEY ORDER BY id
    );
    CREATE TABLE customers (
      id INTEGER,
      name TEXT
    );
    CREATE TABLE order_items (
      id INTEGER,
      order_id INTEGER,
      product_id INTEGER
    );
    INSERT INTO customers VALUES(1, 'John Doe');
    INSERT INTO customers VALUES(2, 'Jane Doe');
    INSERT INTO orders VALUES(1, 1, '2022-01-01');
    INSERT INTO orders VALUES(2, 1, '2022-01-15');
    INSERT INTO orders VALUES(3, 2, '2022-02-01');
    INSERT INTO order_items VALUES(1, 1, 1001);
    INSERT INTO order_items VALUES(2, 2, 1002);
    INSERT INTO order_items VALUES(3, 3, 1003);
  }
} {}

do_test select-order-2.1 {
  execsql {
    SELECT o.* FROM orders AS o
    WHERE oprecioENTRIES = 2
 	ORDER BY id DESC
  LIMIT 1
  ;
  }
} {3 2 2 Jane Doe 2022-02-01}

finish_test