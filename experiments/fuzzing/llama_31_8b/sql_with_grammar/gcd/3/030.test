set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-tables-1.0 {
  execsql {
    CREATE TABLE users(
      id INTEGER PRIMARY KEY,
      username TEXT UNIQUE,
      email TEXT
    );

    CREATE TABLE addresses(
      id INTEGER PRIMARY KEY,
      user_id INTEGER,
      street TEXT
    );
  CREATE TABLE numbers(
      id INTEGER PRIMARY KEY,
      user_id INTEGER,
      number TEXT
    );
  INSERT INTO users(id, username, email) VALUES(1, 'Alice', 'alice@example.com');
  INSERT INTO addresses(id, user_id, street) VALUES(1, 1, '123 Main St');
  INSERT INTO numbers(id, user_id, number) VALUES(1, 1, '123-1234');
}
} {}

do_test insert-constraints-1.1 {
  execsql {
    UPDATE users SET username = 'a_li_ce' WHERE id = 1;
    UPDATE users SET username = 'b_ob' WHERE id = 2;
  }
  } {1 {UNIQUE constraint failed: users.username}

   													  															  														  													  													  																  																 														  																	  																																			  											  																			 																													 												   
 finish_test