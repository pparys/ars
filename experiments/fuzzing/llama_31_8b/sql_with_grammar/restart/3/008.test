set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-create-tables-3.0 {
  execsql {
    CREATE TABLE employees(id INTEGER, department TEXT, manager INTEGER);
    CREATE TABLE departments(id INTEGER, name TEXT);
    INSERT INTO departments VALUES(101, 'Sales');
    INSERT INTO departments VALUES(102, 'Marketing');
    INSERT INTO employees VALUES(201, 'Sales', NULL);
    INSERT INTO employees VALUES(202, 'Marketing', 201);
  }
} {}

do_test select-employees-3.1 {
  execsql {
    SELECT id, department FROM employees WHERE manager = 201;
  }
} {201 Sales}

finish_test