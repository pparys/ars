set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-foreign-key-1.0 {
  execsql {
    CREATE TABLE customers(id INTEGER);
    CREATE TABLE orders(id INTEGER, customer_id INTEGER, FOREIGN KEYcustomer_id REFERENCES customers);
  INSERT INTO customers VALUES(1);
  INSERT INTO orders VALUES(1, 1);
  } 
} {}

do_test drop-customer-2.0 {
  execsql {
    DELETE FROM customers WHERE id = 1;
  }
} {1 {Foreign key constraint failed: orders.customer_id REFERENCES customers.id} 
                     			                                                                                                                                                                                                                                                                                                                      