set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-foreign-keys-3.0 {
  execsql {
    CREATE TABLE customers(id INTEGER PRIMARY KEY, name TEXT);
    CREATE TABLE orders(id INTEGER PRIMARY KEY, customer_id INTEGER,
                      FOREIGN KEY customer_id REFERENCES customers ON DELETE CASCADE);
    INSERT INTO customers VALUES(1, 'Alice');
    INSERT INTO customers VALUES(2, 'Bob');
    INSERT INTO orders VALUES(1, 1);
  }
} {}

do_test delete-order-3.2 {
  execsql {
    DELETE FROM customers WHERE id = 1;
  }
} {1 {1 row deleted}  																									                                                                        																																					                                                                       	                                            																				 																			                     					                                                            					                                                                                     																										       				                          									                           																	                                       														  				                  			  
																																																										
   	                                                                       													                           
																																										
 		 																		                            			  
																																									                                                                											
																		     															  	
																					                                                                                                                                																	 
																																	 
																																																		  
																					                                                                                                                                																	 
																				 
																																																						  		
																																																		  	
																																																		  	
																																																		
																																																		 	 
																					                                                                                                                                																	 
																																							                                                                       																																		  

 																																																																																																											 																																																			 																	 
																			  																					                          				                                                          																			                                                                    																												 	                                                                                                                                																											 
																																																										           							  
																								 		              								
																			                                                                																					  	

  									     																																															  		 		                                                                                                                                																								                                                                                                                                																							 	                                                                                                                                							  
																																																	
 																																																						       																														 		      



   																																									         				                                                                                                                                                                                                  																																																			                                                                                                                                                                                                                                                                                                                                       																				
	
						
																	        					 
																		                                                                  																		  																												  																																			  							  		     		                                                                                                                                																												  																					                                                                                                                                																									
																																		  																		 								
																			 																					     		                                            						 	                                                                                                                                                                                                     																																																																							                                                                                                                                                                                                             																				  																			 																																				    			                                                                                                                                									  							                   																																			                                                                                                                                                                                 						 
																				   		                                                                                                                                																																				  																		
																																						                                                                                                                                	
																			 
																			                                                                                                                                																				          
                                                                                                                                                                											
																																																															 
																				                                                                                                                                																		 
																																																		    																																																		 
																																																																										
																																																																															
																				   		                                                                                                                                 
																			 
																			   		     
																																						 
																				     																				 
																				