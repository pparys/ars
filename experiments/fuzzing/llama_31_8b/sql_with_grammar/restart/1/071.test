set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-table-1.0 {
  execsql {
    CREATE TABLE customers (
      id INTEGER,
      name TEXT,
      email TEXT UNIQUE,
      address TEXT
    );
  CREATE TABLE orders (
      id INTEGER,
      customer_id INTEGER,
      order_date TEXT
    );
  CREATE TABLE order_items (
      id INTEGER,
      order_id INTEGER,
      product_name TEXT,
      quantity INTEGER
    );
  INSERT INTO customers (id, name, email, address) VALUES(
      1, 'John Doe', 'john@example.com', '123 Main St'
  );
  INSERT INTO orders (id, customer_id, order_date) VALUES (
      1, 1, '2022-01-01'
  );
  INSERT INTO order_items (id, order_id, product_name, quantity) VALUES (
      1, 1, 'Product A', 10
  );
  }
} {}

do_test select-order-1.1 {
  execsql {
    SELECT id, customer_id, order_date, 
           SUMquantity AS total_quantity 
    FROM order_items 
    GROUP BY id, customer_id, order_date;
  }
} {1 1 2022-01-01 10}

finish_test