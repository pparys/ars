set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-foreign-keys-1.0 {
  execsql {
    CREATE TABLE t1(id INTEGER PRIMARY KEY);
    CREATE TABLE t2(id INTEGER PRIMARY KEY, t1_id INTEGER REFERENCES t1);
    INSERT INTO t1 VALUES(1);
    INSERT INTO t2 VALUES(1, 1);
  }
} {}

do_test insert-foreign-key-error-1.1 {
  execsql {
    DELETE FROM t1 WHERE id = 1;
    DELETE FROM t2 WHERE id = 1;
  }
  										 
  												 	                                        							  
  																								
  														
 												 
   
  														
  													 											 											         																					 																		} {1 {FOREIGN KEY constraint failed: t2.t1_id} 									     
 													 	                                    							                                    
  												            
																		              				                                                                										
  																							
  													  												  												   
  													    					 
  												 
  													 																						 
																						                   			  
  													 	
  													   
  													 											
  												 												 											         									     																			     																			 																			 																								                                                                                                                                                                                                     											   								 																			              																				         																				   																																				    		
  													    																						 															         																					   	   
  													 									    				  
  													 				   								
  													  	
  													 
  													 															
  													 							  
 													  																  																																				  	 
  finish_test