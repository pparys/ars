set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-table-1.0 {
  execsql {
    CREATE TABLE books(id INTEGER PRIMARY KEY AUTOINCREMENT, 
                      title TEXT NOT NULL, 
                      author TEXT DEFAULT NULL);
  CREATE TABLE authors(id INTEGER PRIMARY KEY AUTOINCREMENT, 
                    name TEXT NOT NULL UNIQUE);
  CREATE TABLE midpoints(midpoint_id INTEGER PRIMARY KEY AUTOINCREMENT, 
                        book_id INTEGER, 
                        author_id INTEGER, 
                        FOREIGN KEY book_id REFERENCES books ON DELETE CASCADE, 
                        FOREIGN KEY author_id REFERENCES authors ON DELETE CASCADE);
  INSERT INTO books(title, author) VALUES('SQLite Internals', 'D. Richard Hipp');
  INSERT INTO books(title, author) VALUES('The Art of Computer Programming', 'Donald Knuth');
  INSERT INTO authors(name) VALUES('A. U. Thor');
  INSERT INTO authors(name) VALUES('B. U. Rupee');
  INSERT INTO midpoints(book_id, author_id) VALUES(1, 1);
}
} {}

do_test query-table-1.1 {
  execsql {
    SELECT title FROM books WHERE id = 1;
  }
} {SQLite Internals}

finish_test