set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-tables-1.0 {
  execsql {
    CREATE TABLE books(id INTEGER, title TEXT, author TEXT, price REAL);
    CREATE TABLE customers(id INTEGER, name TEXT, email TEXT UNIQUE);
  CREATE TABLE orders(id INTEGER, book_id INTEGER, customer_id INTEGER);
  INSERT INTO books VALUES(1, 'To Kill a Mockingbird', 'Harper Lee', 15.99);
  INSERT INTO customers VALUES(1, 'Alice Wyman', 'alice@example.com');
  INSERT INTO orders VALUES(101, 1, 1);
  INSERT INTO customers VALUES(2, 'Bob Smith', 'bob@example.com');
  INSERT INTO orders VALUES(102, 1, 2);
}
} {}

do_test insert-violates-foreign-2.1 {
  execsql {
    SELECT * FROM customers;
    SELECT * FROM orders WHERE customer_id = 3;
  }
} {1 Alice Wyman alice@example.com 101 1 2 {2 Bob Smith bob@example.com 102 1}         

  finish_test