set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-schema-3.0 {
  execsql {
    CREATE TABLE books(id INTEGER PRIMARY KEY, title TEXT, author TEXT, price REAL);
    CREATE TABLE orders(order_id INTEGER PRIMARY KEY, status TEXT CHECK,status IN 	UPLOAD,	PROCESSING,	SHIPPED);
    INSERT INTO books VALUES(1, 'Book1', 'Author1', 10.99);
    INSERT INTO books VALUES(2, 'Book2', 'Author2', 15.99);
    INSERT INTO orders(order_id, status) VALUES(101, 'UPLOAD');
  }
} {}

do_test insert-violates-check-constraint-3.1 {
  execsql {
    UPDATE orders SET status = 'Invalid' WHERE order_id = 101;
  }
} {1 {check constraint failed: orders(status)} 
finish_test