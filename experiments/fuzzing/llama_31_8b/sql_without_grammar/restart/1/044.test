set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-foreign-keys-1.0 {
  execsql {
    CREATE TABLE customers(id INTEGER PRIMARY KEY, 
                          customer_name TEXT, 
                          customer_email TEXT);
    CREATE TABLE orders(order_id INTEGER PRIMARY KEY, 
                       order_customer_id INTEGER,
                       foreign keyorder_customer_id references customers);
    INSERT INTO customers(id, customer_name, customer_email) VALUES(1, 'Alice', 'alice@example.com');
    INSERT INTO customers(id, customer_name, customer_email) VALUES(2, 'Bob', 'bob@example.com');
    INSERT INTO orders(order_id, order_customer_id) VALUES(1, 1);
    INSERT INTO orders(order_id, order_customer_id) VALUES(2, 1);
  }
} {}

do_test delete-order-parent-1.1 {
  execsql {
    DELETE FROM customers WHERE id = 1;
  }
} {1 {FOREIGN KEY constraint failed: orders}  																		 							  
     									 
     																					 			                                                          
                                         													  																		
											 												 
                         																				  																		
                          													 						                               														
													 							 		                		                                                                                                                                     
														 												  												 
													  																				    																																		
                                                    																				  																				  											 
                                                                                                													 																							   
																			 												 
																			 										
   	   																					                                                                                                                                      
    																				  																				  	
     															 												    					   
    																				 
     									
                                                   	
   																				 
	   													 
																				 
																				 
																				 
												

                          

 	                                                                                                                                                                                                                                                     
						   
	  					         							
  
																				 		                                                                                                                                								   													 													 	
     		 				       					       	 																																

								                                                                                                                                                                                                           	 	       														                                                                                                                                             					                                                                        
																																				 									  																		
																				 	 																																						 	  	
 
																				 																																			
 														                                                                                                                                                                                                                                                                     
															                                                                                                                                                                                                                                                                     
   			                                                                                                                                																				  			                                                                                                                                           								 													 
																				  																		        				   
																				  																				 	
	
finish_test