set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-table-foreign-keys-1.0 {
  execsql {
    CREATE TABLE companies(id INTEGER PRIMARY KEY, name TEXT);
    CREATE TABLE employees(id INTEGER PRIMARY KEY, company_id INTEGER, 
                          FOREIGN KEY company_id REFERENCES companies);
    INSERT INTO companies VALUES(1, 'Google');
    INSERT INTO employees VALUES(1, 1);
  }
} {}

do_test delete-foreign-key-1.1 {
  execsql {
    DELETE FROM companies WHERE id = 1;
  }
} {1 {FOREIGN KEY constraint failed: employees.company_id} 
     





   







    





   







    





   







    





   







  


   


  





 


    










 
  





 


    










 

    





   


  





 


 


  

  





   






      


  

  


  

  


 

    





 



 

  





 


 


  





 


    











  

  





 


 
 
 
 
 
 
 
 
 


    





 


   



  


 





  




 





   





   





  



 





 



 

 

  





 





 

 


 


 





 
 





   
   
   
 
 





 





 
    
   


 


   


  





 


 


 

 


 


  


 





 
 





 



 

 

 
 


 


 


 


 
 

  

 





 





 

 




   





 

 
 





 


 


 




 


   



 





    





 





 

  
  



  


  

 





   


 
 


 


 



 
 





  

  





 


 


 





 


 


 





   


  


  



 
 



 





 




 





      
      





 
  

 
 
 
 

 

 
 

    





 


 
 
 
 
 
 
 


 





 


  





 


  





 
        
       



  

 


   



 





   


 



 





   





   





 

  



 
 





    





 

 

  

 


 





  

 





 


  




 
 
 



 



 
  

 


 





  
  


  




 





  


  
 



  





    





 



 





 

       

 
 



 
 
 
 

 


   



 
 





 





  
		
		
		
	






  



 





 



 





 



 





	





    





 	



 





  

 
 
 
 
 



 
 
 



