set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-foreign-keys-1.0 {
  execsql {
    CREATE TABLE orders(id INTEGER PRIMARY KEY, customer_id INTEGER,
      FOREIGN KEY customer_id REFERENCES customers FOR UPDATE ON DELETE CASCADE);
    CREATE TABLE customers(id INTEGER PRIMARY KEY, name TEXT);
  CREATE TABLE products(id INTEGER PRIMARY KEY, name TEXT);
  INSERT INTO customers VALUES(1, 'John Doe');
  INSERT INTO customers VALUES(2, 'Jane Doe');
  INSERT INTO orders VALUES(1, 1);
  INSERT INTO orders VALUES(2, 1);
  INSERT INTO orders VALUES(3, 2);
  INSERT INTO products VALUES(1, 'Product 1');
  INSERT INTO products VALUES(2, 'Product 2');
  INSERT INTO products VALUES(3, 'Product 3');
  }
} {}

do_test select-products-1.1 {
  execsql {
    SELECT o.* FROM orders AS o
    ORDER BY o_id
  ;}
} {1 1 2 1 3 2}

finish_test