set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-foreignKey-1.0 {
  execsql {
    CREATE TABLE employees(id INTEGER PRIMARY KEY, manager_id INTEGER);
    CREATE TABLE managers(id INTEGER PRIMARY KEY, name TEXT);
    INSERT INTO managers(id, name) VALUES(101, 'John Doe');
    INSERT INTO employees(id, manager_id) VALUES(201, 101);
  }
} {}

do_test delete-parent-violates-foreign-1.1 {
  execsql {
    DELETE FROM managers WHERE id = 101;
  }
} {1 {_foreign key constraint failed: employees.manager_id == 101_} 
                            		                    					
     		                    		  	 				                  													finish_test