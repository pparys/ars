set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-employees-3.0 {
  execsql {
    CREATE TABLE employees(id INTEGER PRIMARY KEY, 
                          name TEXT NOT NULL, 
                          salary REAL NOT NULL, 
                          UNIQUEUNIQUE email TEXT);
                          CREATE TABLE salaries (id INTEGER, 
                          salary REAL, 
                          CREATE INDEX idx_email ON employees email);
  CREATE TABLE salary_history (id INTEGER, 
                          salary REAL, 
                          FOREIGN KEY id REFERENCES employees)
  ; 
    INSERT INTO employees VALUES(1, 'Alice', 50000.0, 'alice@example.com');
    INSERT INTO employees VALUES(2, 'Bob', 60000.0, 'bob@example.com');
    INSERT INTO salary_history VALUES(2, 70000.0)
  ; 
}
} {}

do_test update-salary-3.1 {
  execsql {
    UPDATE employees SET salary = 65000.0 WHERE id = 1;
  }
} {}

finish_test