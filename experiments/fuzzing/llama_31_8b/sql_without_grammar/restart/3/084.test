set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-foreign-key-3.0 {
  execsql {
    CREATE TABLE departments(department_id INTEGER PRIMARY KEY, department_name TEXT);
    CREATE TABLE employees(employee_id INTEGER PRIMARY KEY, department_id INTEGER, FOREIGN KEY department_id REFERENCES departments department_id);
    INSERT INTO departments VALUES(101, 'Sales');
    INSERT INTO departments VALUES(102, 'Marketing');
    INSERT INTO employees VALUES(201, 101);
    INSERT INTO employees VALUES(202, 102);
  }
} {}

do_test insert-violates-foreign-key-3.1 {
  execsql {
    UPDATE departments SET department_name = 'HR' WHERE department_id = 101;
    UPDATE employees SET department_id = 102 WHERE employee_id = 201;
  }
   	} {0 {} 			      																																																																																																																																																																																																																																																																																																																																										