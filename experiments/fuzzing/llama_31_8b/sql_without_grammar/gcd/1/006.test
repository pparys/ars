set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-database-3.0 {
  execsql {
    CREATE TABLE products(id INTEGER PRIMARY KEY, name TEXT, price REAL);
    CREATE TABLE invoices(id INTEGER PRIMARY KEY, product_id INTEGER,
                         FOREIGN KEY product_id REFERENCES products);
    INSERT INTO products(id, name, price) VALUES(1, 'Product A', 12.99);
    INSERT INTO products(id, name, price) VALUES(2, 'Product B', 9.99);
    INSERT INTO invoices(id, product_id) VALUES(1, 1);
    INSERT INTO invoices(id, product_id) VALUES(2, 2);
  }
} {}

do_test delete-invoice-3.1 {
  execsql {
    DELETE FROM invoices WHERE id = 1;
  }
} {}

finish_test