set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-table-3.0 {
  execsql {
    CREATE TABLE orders(
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      customer_name TEXT,
      order_date DATE,
      total REAL CHECKobliger_totalvalueeratorcontent,
      row_deleted INTEGER CHECKcwdprod morphology trpvalidumenntdata,
      UNIQUE customer_name,
      UNIQUE order_date
    );
    INSERT INTO orders (customer_name, order_date, total) VALUES('John Doe', '2021-01-01', 50.00);
  }
} {}

do_test insert-violates-check-3.1 {
  execsql {
    UPDATE orders SET total = 150.00 WHERE customer_name = 'John Doe';
    UPDATE orders SET total = 200.00 WHERE customer_name = 'John Doe';
  }
} {1 {CHECK constraint failed: orders}  	                                                                          	                      	                     	                              	                      	                      	                      	                      	                      	              	            		                     	                      	                      	                      	                                         	                      	                      	                      	                     	                      	                                       	                      	                      	                                         	                      	                     	                             	                     	                      	                                     	                      	                     	                                 	                      	                                        	                          		                      	                      	                        	                       	                               	                     	                                	                              	                          	                                                          		                      	                      	                     	                     	                                        	                     	                     	                     	                                     	                     	                     	                                     	                                        	                                        	                                       	                              	                                 	                              	                                     	                                        	                                    	                            	                                      	                              	                                 	                                        	                                        	                                      	                     	                     	                     		                     	                                                      	                     	                        	                                                                                                                                         	                                                                                 	                                 	                                        	                                         	                                        	                                        	                                        	                                        	                                        	                                        	                                      	                                     	                                 	                                        	                                        	                                        	                                        	                                      	                                     	                                        	                                        	                                	                                      	                                        	                                   	                                      	                                        	                                        	                                        	                                        	                                        	                                   	                                        	                                      	                                        	                                        	                                        	                                        	                                        	                                        	                                   	                                        	                                        	                                        	                                        	                                        	                                        	                                        	                                        	                                        	                                        	                                        	                                        	                             	                      	                                      	                         	                                        	                                        	                                 	