set testdir [file dirname $argv0]
source $testdir/tester.tcl

do_test setup-tables-3.0 {
  execsql {
    CREATE TABLE orders(id INTEGER PRIMARY KEY, product TEXT, customer TEXT);
    CREATE TABLE products(id INTEGER PRIMARY KEY, name TEXT);
    CREATE TABLE customers(id INTEGER PRIMARY KEY, name TEXT);
    INSERT INTO products(id, name) VALUES(301, 'Product 1');
    INSERT INTO products(id, name) VALUES(302, 'Product 2');
    INSERT INTO customers(id, name) VALUES(201, 'Customer 1');
    INSERT INTO customers(id, name) VALUES(202, 'Customer 2');
    INSERT INTO orders(id, product, customer) VALUES(1, 301, 201);
    INSERT INTO orders(id, product, customer) VALUES(2, 302, 202);
  }
} {}

do_test update-foreign-key-3.1 {
  execsql {
    UPDATE products SET name = 'Product 3' WHERE id = 301;
    SELECT name FROM products WHERE id = 301;
  }
} {Product 3}

finish_test